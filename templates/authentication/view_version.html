{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h1>{{ page_title }}</h1>
    
    <div class="mb-3">
        <a href="{% url 'authentication:entry_version_history' entry.id %}" class="btn btn-secondary">Back to Version History</a>
        <a href="{% url 'authentication:export_version_pdf' entry.id version.version_number %}" class="btn btn-success">Export PDF</a>
        {% if not is_current %}
        <a href="{% url 'authentication:restore_version' entry.id version.version_number %}" class="btn btn-warning">Restore This Version</a>
        {% endif %}
    </div>
    
    <div class="card">
        <div class="card-header">
            <h3>{{ version.title }}</h3>
            <small>Version {{ version.version_number }} - {{ version.created_at|date:"M d, Y H:i" }}</small>
            {% if is_current %}
                <span class="badge bg-primary">Current Version</span>
            {% endif %}
        </div>
        <div class="card-body">
            <h5>Prompt:</h5>
            <p>{{ version.prompt }}</p>
            
            <h5>Answer:</h5>
            <div>{{ version.answer|linebreaks }}</div>
            
            <hr>
            
            <p><strong>Theme:</strong> {{ version.theme.name }}</p>
            <p><strong>Visibility:</strong> {{ version.get_visibility_display }}</p>
            <p><strong>Edit Source:</strong> {{ version.get_edit_source_display }}</p>
            {% if version.restored_from_version %}
            <p><strong>Restored from:</strong> Version {{ version.restored_from_version }}</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
