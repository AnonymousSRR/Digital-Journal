{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h1>{{ page_title }}</h1>
    
    <div class="mb-3">
        <a href="{% url 'authentication:entry_version_history' entry.id %}" class="btn btn-secondary">Back to Version History</a>
    </div>
    
    <div class="alert alert-info">
        <strong>Changes Summary:</strong>
        {% if comparison.title_changed %}Title changed. {% endif %}
        {% if comparison.prompt_changed %}Prompt changed. {% endif %}
        {% if comparison.answer_changed %}Answer changed. {% endif %}
    </div>
    
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-light">
                    <h4>Version {{ comparison.v1.version_number }}</h4>
                    <small>{{ comparison.v1.created_at|date:"M d, Y H:i" }}</small>
                </div>
                <div class="card-body">
                    <h5>Title:</h5>
                    <p>{{ comparison.v1.title }}</p>
                    
                    <h5>Answer:</h5>
                    <div>{{ comparison.v1.answer|linebreaks }}</div>
                </div>
            </div>
        </div>
        
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-light">
                    <h4>Version {{ comparison.v2.version_number }}</h4>
                    <small>{{ comparison.v2.created_at|date:"M d, Y H:i" }}</small>
                </div>
                <div class="card-body">
                    <h5>Title:</h5>
                    <p>{{ comparison.v2.title }}</p>
                    
                    <h5>Answer:</h5>
                    <div>{{ comparison.v2.answer|linebreaks }}</div>
                </div>
            </div>
        </div>
    </div>
    
    {% if comparison.diff %}
    <div class="card mt-3">
        <div class="card-header">
            <h4>Text Diff</h4>
        </div>
        <div class="card-body">
            <pre>{% for line in comparison.diff %}{{ line }}
{% endfor %}</pre>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
